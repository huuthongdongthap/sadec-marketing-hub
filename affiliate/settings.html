<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="../favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√†i ƒë·∫∑t - Affiliate Portal</title>
    <meta name="description" content="Configure notification preferences, security settings, and account options.">

    <script type="importmap">
    {"imports": {"@material/web/": "https://esm.run/@material/web/"}}
  </script>
    <script type="module">import '@material/web/all.js';</script>

    <link
        href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Google+Sans+Text:wght@400;500&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Symbols+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/m3-agency.css">
    <link rel="stylesheet" href="../assets/css/portal.css">

    <!-- Components -->
    <script src="../assets/js/components/sadec-sidebar.js"></script>

    <style>
        .portal-layout {
            display: grid;
            grid-template-columns: auto 1fr;
            min-height: 100vh;
        }

        @media (max-width: 1024px) {
            .portal-layout {
                grid-template-columns: 1fr;
            }
        }

        .main-content {
            background: var(--md-sys-color-surface);
            padding: 32px;
            overflow-y: auto;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .page-title {
            font: var(--md-sys-typescale-headline-medium);
        }

        .settings-section {
            background: var(--md-sys-color-surface-container-low);
            border: 1px solid var(--md-sys-color-outline-variant);
            border-radius: 16px;
            margin-bottom: 24px;
            overflow: hidden;
        }

        .section-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--md-sys-color-outline-variant);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-title {
            font: var(--md-sys-typescale-title-large);
        }

        .section-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--md-sys-color-primary-container);
            color: var(--md-sys-color-primary);
        }

        .setting-item {
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--md-sys-color-outline-variant);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-info {
            flex: 1;
        }

        .setting-label {
            font: var(--md-sys-typescale-body-large);
            margin-bottom: 2px;
        }

        .setting-description {
            font: var(--md-sys-typescale-body-small);
            color: var(--md-sys-color-on-surface-variant);
        }

        .danger-zone {
            background: rgba(220, 53, 69, 0.05);
            border-color: rgba(220, 53, 69, 0.2);
        }

        .danger-zone .section-icon {
            background: rgba(220, 53, 69, 0.1);
            color: #dc3545;
        }

        .language-selector {
            display: flex;
            gap: 8px;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 1px solid var(--md-sys-color-outline);
            border-radius: 8px;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            color: var(--md-sys-color-on-surface);
            transition: all 0.2s;
        }

        .lang-btn.active {
            background: var(--md-sys-color-primary);
            color: var(--md-sys-color-on-primary);
            border-color: var(--md-sys-color-primary);
        }

        .lang-btn:hover:not(.active) {
            background: var(--md-sys-color-surface-container);
        }
    </style>
</head>

<body>
    <div class="portal-layout">
        <!-- Unified Sidebar -->
        <sadec-sidebar active="settings" role="affiliate"></sadec-sidebar>

        <!-- Main Content -->
        <main class="main-content">
            <div class="page-header">
                <div>
                    <h1 class="page-title">C√†i ƒë·∫∑t</h1>
                    <div class="body-medium text-muted">Qu·∫£n l√Ω t√πy ch·ªçn t√†i kho·∫£n v√† b·∫£o m·∫≠t</div>
                </div>
            </div>

            <!-- Notifications -->
            <div class="settings-section">
                <div class="section-header">
                    <div class="section-icon">
                        <span class="material-symbols-outlined">notifications</span>
                    </div>
                    <div class="section-title">Th√¥ng b√°o</div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Th√¥ng b√°o Email</div>
                        <div class="setting-description">Nh·∫≠n email khi c√≥ referral m·ªõi ho·∫∑c hoa h·ªìng ƒë∆∞·ª£c ghi nh·∫≠n
                        </div>
                    </div>
                    <md-switch selected></md-switch>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">B√°o c√°o tu·∫ßn</div>
                        <div class="setting-description">Nh·∫≠n t·ªïng h·ª£p hi·ªáu su·∫•t m·ªói tu·∫ßn qua email</div>
                    </div>
                    <md-switch selected></md-switch>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Th√¥ng b√°o thanh to√°n</div>
                        <div class="setting-description">Nh·∫≠n th√¥ng b√°o khi hoa h·ªìng ƒë∆∞·ª£c thanh to√°n</div>
                    </div>
                    <md-switch selected></md-switch>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Tin t·ª©c v√† khuy·∫øn m√£i</div>
                        <div class="setting-description">Nh·∫≠n th√¥ng tin v·ªÅ ch∆∞∆°ng tr√¨nh th∆∞·ªüng m·ªõi</div>
                    </div>
                    <md-switch></md-switch>
                </div>
            </div>

            <!-- Security -->
            <div class="settings-section">
                <div class="section-header">
                    <div class="section-icon">
                        <span class="material-symbols-outlined">security</span>
                    </div>
                    <div class="section-title">B·∫£o m·∫≠t</div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">ƒê·ªïi m·∫≠t kh·∫©u</div>
                        <div class="setting-description">C·∫≠p nh·∫≠t m·∫≠t kh·∫©u ƒëƒÉng nh·∫≠p c·ªßa b·∫°n</div>
                    </div>
                    <md-outlined-button>
                        <md-icon slot="icon">key</md-icon>
                        ƒê·ªïi m·∫≠t kh·∫©u
                    </md-outlined-button>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">X√°c th·ª±c 2 b∆∞·ªõc (2FA)</div>
                        <div class="setting-description">Th√™m l·ªõp b·∫£o m·∫≠t b·∫±ng m√£ OTP khi ƒëƒÉng nh·∫≠p</div>
                    </div>
                    <md-switch></md-switch>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Phi√™n ƒëƒÉng nh·∫≠p</div>
                        <div class="setting-description">Qu·∫£n l√Ω c√°c thi·∫øt b·ªã ƒëang ƒëƒÉng nh·∫≠p</div>
                    </div>
                    <md-text-button>
                        <md-icon slot="icon">devices</md-icon>
                        Qu·∫£n l√Ω
                    </md-text-button>
                </div>
            </div>

            <!-- Preferences -->
            <div class="settings-section">
                <div class="section-header">
                    <div class="section-icon">
                        <span class="material-symbols-outlined">tune</span>
                    </div>
                    <div class="section-title">T√πy ch·ªçn</div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">Ng√¥n ng·ªØ</div>
                        <div class="setting-description">Ch·ªçn ng√¥n ng·ªØ hi·ªÉn th·ªã</div>
                    </div>
                    <div class="language-selector">
                        <button class="lang-btn active">üáªüá≥ Ti·∫øng Vi·ªát</button>
                        <button class="lang-btn">üá∫üá∏ English</button>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">M√∫i gi·ªù</div>
                        <div class="setting-description">M√∫i gi·ªù cho b√°o c√°o v√† th√¥ng b√°o</div>
                    </div>
                    <md-outlined-select style="width: 200px;">
                        <md-select-option value="asia_hcm" selected>
                            <div slot="headline">UTC+7 (H·ªì Ch√≠ Minh)</div>
                        </md-select-option>
                        <md-select-option value="asia_hanoi">
                            <div slot="headline">UTC+7 (H√† N·ªôi)</div>
                        </md-select-option>
                    </md-outlined-select>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">ƒê·ªãnh d·∫°ng ti·ªÅn t·ªá</div>
                        <div class="setting-description">ƒê∆°n v·ªã ti·ªÅn hi·ªÉn th·ªã trong b√°o c√°o</div>
                    </div>
                    <md-outlined-select style="width: 150px;">
                        <md-select-option value="vnd" selected>
                            <div slot="headline">VND (‚Ç´)</div>
                        </md-select-option>
                        <md-select-option value="usd">
                            <div slot="headline">USD ($)</div>
                        </md-select-option>
                    </md-outlined-select>
                </div>
            </div>

            <!-- Danger Zone -->
            <div class="settings-section danger-zone">
                <div class="section-header">
                    <div class="section-icon">
                        <span class="material-symbols-outlined">warning</span>
                    </div>
                    <div class="section-title" style="color: #dc3545;">V√πng nguy hi·ªÉm</div>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">T·∫°m d·ª´ng t√†i kho·∫£n</div>
                        <div class="setting-description">T·∫°m ng∆∞ng ho·∫°t ƒë·ªông partner, c√≥ th·ªÉ k√≠ch ho·∫°t l·∫°i sau</div>
                    </div>
                    <md-outlined-button style="--md-outlined-button-outline-color: #dc3545; color: #dc3545;">
                        T·∫°m d·ª´ng
                    </md-outlined-button>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-label">X√≥a t√†i kho·∫£n</div>
                        <div class="setting-description">X√≥a vƒ©nh vi·ªÖn t√†i kho·∫£n v√† to√†n b·ªô d·ªØ li·ªáu. Kh√¥ng th·ªÉ ho√†n t√°c.
                        </div>
                    </div>
                    <md-filled-button style="--md-filled-button-container-color: #dc3545;">
                        <md-icon slot="icon">delete_forever</md-icon>
                        X√≥a t√†i kho·∫£n
                    </md-filled-button>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../supabase-config.js"></script>
    <script src="../auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            await Auth.UI.init();

            if (!Auth.State.isAuthenticated) {
                window.location.href = '/auth/login.html?role=affiliate';
            }

            // Language selector toggle
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });
        });
    </script>
</body>

</html>